# Summer Web - TODO & Progress Log

## TODOs (待办事项)

1.  **MVC 核心:** (关联 F2)
    - [ ] **路由:** (T1.8)
      - [ ] 实现运行时路由匹配逻辑 (使用 `summer-macros` 生成的路由表)。
      - [ ] 支持路径变量、查询参数的提取。
    - [ ] **控制器调用:** (T1.10)
      - [ ] 从 IOC 容器获取 Controller 实例。
      - [ ] 调用匹配到的 Controller 方法。
    - [ ] **请求处理:**
      - [ ] 实现参数绑定逻辑 (将提取的路径变量、查询参数、请求头注入到方法参数) (T2.1)。
      - [ ] 实现请求体反序列化逻辑 (JSON, Form) (T2.2)。
    - [ ] **响应处理:**
      - [ ] 实现 `IntoResponse` trait，支持多种返回类型 (T2.3)。
      - [ ] 实现将返回值序列化为响应体 (默认 JSON) (T2.3)。
      - [ ] 处理 `Result<T, E>` 返回值，映射到 HTTP 状态码 (T2.4)。
    - [ ] **错误处理:** (T2.4)
      - [ ] 实现全局异常处理机制 (查找并调用 `@ExceptionHandler` 方法)。
2.  **中间件:** (关联 F9)
    - [ ] **API 定义:** (T3.1)
      - [ ] 定义中间件 trait 或函数签名 (在 `summer-core`)。
      - [ ] 确定中间件如何访问请求/响应，如何控制流程。
    - [ ] **注册与执行:** (T3.1)
      - [ ] 实现中间件的注册机制 (全局、路由级别)。
      - [ ] 在请求处理流程中按顺序执行已注册的中间件。
3.  **测试:**
    - [ ] 编写路由匹配逻辑的测试。
    - [ ] 编写参数绑定和请求体反序列化的测试。
    - [ ] 编写响应处理和序列化的测试。
    - [ ] 编写错误处理机制的测试。
    - [ ] 编写中间件注册和执行流程的测试。

## Development Plan Tasks (关联开发计划)

- [T1.8] 实现运行时路由匹配
- [T1.10] 实现简单的 Controller 方法调用和文本响应返回
- [T2.1] 实现 MVC 请求参数绑定 (运行时部分)
- [T2.2] 实现 MVC 请求体反序列化 (运行时部分)
- [T2.3] 实现 MVC 响应自动序列化 和 `IntoResponse` 支持
- [T2.4] 实现统一错误处理机制 (运行时部分)
- [T3.1] 设计并实现 Web 中间件 API 和注册机制
